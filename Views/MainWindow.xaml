<Window x:Class="FocusBuddy.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="FocusBuddy"
        Height="760"
        Width="1200">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#252525" Padding="16">
            <StackPanel>
                <TextBlock Text="FocusBuddy" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,18"/>
                <TextBlock Text="{Binding SubtitleText}" Margin="0,0,0,30" Foreground="#BBBBBB"/>

                <Button Content="{Binding RefreshDashboardText}" Command="{Binding RefreshDashboardCommand}" />
                <Separator Margin="0,14" />
                <TextBlock Text="{Binding LanguageText}" FontSize="16" Margin="0,0,0,4"/>
                <ComboBox ItemsSource="{Binding LanguageOptions}" SelectedItem="{Binding SelectedLanguage}" Margin="0,0,0,10" />

                <TextBlock Text="{Binding FocusModeTitleText}" FontSize="18" Margin="0,0,0,8" />
                <CheckBox IsChecked="{Binding IsFocusModeEnabled}" Content="{Binding EnableFocusModeText}" Margin="0,4" Foreground="White"/>
                <CheckBox IsChecked="{Binding AutoMinimizeDistractingApps}" Content="{Binding AutoMinimizeText}" Margin="0,4" Foreground="White"/>
                <TextBlock Text="{Binding BlacklistLabelText}" Margin="0,12,0,6"/>
                <TextBox Text="{Binding BlacklistRaw}" AcceptsReturn="True" Height="170" Background="#333" Foreground="White" BorderThickness="0"/>
                <Button Content="{Binding SaveFocusSettingsText}" Command="{Binding SaveFocusSettingsCommand}" Margin="0,10,0,0"/>
            </StackPanel>
        </Border>

        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20">
                <Border Background="#2A2A2A" CornerRadius="8" Padding="16" Margin="0,0,0,14">
                    <StackPanel>
                        <TextBlock Text="{Binding TodayTotalText}" FontSize="16" Foreground="#AFAFAF"/>
                        <TextBlock Text="{Binding Dashboard.TodayTotalTime}" FontSize="30" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Background="#2A2A2A" CornerRadius="8" Padding="12" Margin="0,0,8,0">
                        <StackPanel>
                            <TextBlock Text="{Binding TodayByCategoryText}" FontSize="18" Margin="0,0,0,12"/>
                            <ItemsControl ItemsSource="{Binding Dashboard.CategoryBreakdown}" />
                        </StackPanel>
                    </Border>

                    <Border Grid.Column="1" Background="#2A2A2A" CornerRadius="8" Padding="12" Margin="8,0,0,0">
                        <StackPanel>
                            <TextBlock Text="{Binding Last7DaysText}" FontSize="18" Margin="0,0,0,12"/>
                            <ItemsControl ItemsSource="{Binding Dashboard.WeeklyTotals}" />
                        </StackPanel>
                    </Border>
                </Grid>

                <Border Background="#2A2A2A" CornerRadius="8" Padding="12" Margin="0,14,0,0">
                    <StackPanel>
                        <TextBlock Text="{Binding TopAppsTodayText}" FontSize="18" Margin="0,0,0,8"/>
                        <ItemsControl ItemsSource="{Binding Dashboard.TopApps}" />
                    </StackPanel>
                </Border>

                <Border Background="#2A2A2A" CornerRadius="8" Padding="12" Margin="0,14,0,0">
                    <StackPanel>
                        <TextBlock Text="{Binding CategoryRulesText}" FontSize="18" Margin="0,0,0,8"/>
                        <TextBlock Text="{Binding CategoryRulesHeaderText}"
                                   Foreground="#BFBFBF"
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,8"/>
                        <DataGrid ItemsSource="{Binding CategoryRules}"
                                  SelectedItem="{Binding SelectedCategoryRule}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  HeadersVisibility="Column"
                                  MinHeight="180"
                                  Margin="0,0,0,8">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="{Binding DataContext.CategoryColumnText, RelativeSource={RelativeSource AncestorType=Window}}"
                                                    Binding="{Binding Category, UpdateSourceTrigger=PropertyChanged}"
                                                    Width="180"/>
                                <DataGridTextColumn Header="{Binding DataContext.ProcessColumnText, RelativeSource={RelativeSource AncestorType=Window}}"
                                                    Binding="{Binding ProcessNames, UpdateSourceTrigger=PropertyChanged}"
                                                    Width="*"/>
                                <DataGridTextColumn Header="{Binding DataContext.KeywordsColumnText, RelativeSource={RelativeSource AncestorType=Window}}"
                                                    Binding="{Binding WindowTitleKeywords, UpdateSourceTrigger=PropertyChanged}"
                                                    Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <StackPanel Orientation="Horizontal">
                            <Button Content="{Binding AddCategoryRuleText}" Command="{Binding AddCategoryRuleCommand}" Margin="0,0,8,0"/>
                            <Button Content="{Binding RemoveCategoryRuleText}" Command="{Binding RemoveCategoryRuleCommand}" Margin="0,0,8,0"/>
                            <Button Content="{Binding SaveCategoryRulesText}" Command="{Binding SaveCategoryRulesCommand}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
